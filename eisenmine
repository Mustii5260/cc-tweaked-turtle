-- =========================
-- FTB EVOLUTION STRIP MINER
-- 3x3 Haupttunnel
-- 3x3 Seitenschächte (20)
-- =========================

local TUNNEL_LAENGE = 200
local STRIP_LAENGE = 20
local STRIP_ABSTAND = 3
local MIN_FUEL = 800

-- ===== NUR MÜLL (ALLES ANDERE BLEIBT) =====
local junk = {
  ["minecraft:cobblestone"] = true,
  ["minecraft:cobbled_deepslate"] = true,
  ["minecraft:dirt"] = true,
  ["minecraft:gravel"] = true,
  ["minecraft:andesite"] = true,
  ["minecraft:diorite"] = true,
  ["minecraft:granite"] = true,
  ["minecraft:tuff"] = true
}

local steps = 0

-- ===== BASIC DIG =====
local function digForward()
  while turtle.detect() do turtle.dig() sleep(0.05) end
end

local function digUp()
  while turtle.detectUp() do turtle.digUp() sleep(0.05) end
end

local function digDown()
  while turtle.detectDown() do turtle.digDown() sleep(0.05) end
end

-- ===== 3x3 SCHRITT (WIEDERVERWENDBAR) =====
local function dig3x3Step(allowDown)
  digForward()
  turtle.forward()
  digUp()
  if allowDown then digDown() end

  -- links
  turtle.turnLeft()
  digForward()
  turtle.forward()
  digUp()
  digDown()
  turtle.back()
  turtle.turnRight()

  -- rechts
  turtle.turnRight()
  digForward()
  turtle.forward()
  digUp()
  digDown()
  turtle.back()
  turtle.turnLeft()
end

-- ===== 3x3 STRIP =====
local function dig3x3Strip(length)
  for i = 1, length do
    dig3x3Step(true)
  end

  -- zurück zum Haupttunnel
  turtle.turnLeft()
  turtle.turnLeft()
  for i = 1, length do turtle.forward() end
  turtle.turnLeft()
  turtle.turnLeft()
end

-- ===== INVENTAR =====
local function dropJunk()
  for i = 1, 16 do
    turtle.select(i)
    local item = turtle.getItemDetail()
    if item and junk[item.name] then
      turtle.drop()
    end
  end
end

local function inventoryFull()
  for i = 1, 16 do
    if turtle.getItemCount(i) == 0 then return false end
  end
  return true
end

-- ===== BASE =====
local function goHome()
  turtle.turnLeft()
  turtle.turnLeft()
  for i = 1, steps do turtle.forward() end
  turtle.turnLeft()
  turtle.turnLeft()
end

local function dumpInventoryDown()
  for i = 1, 16 do
    turtle.select(i)
    turtle.dropDown()
  end
end

-- ===== FUEL =====
local function refuel()
  turtle.turnLeft()
  turtle.suck(64)
  turtle.turnRight()
  f
